# !(Not)Doomsday

**AI-powered multi-hazard catastrophic risk monitoring platform** built for the InnovAIte Hackathon 2026.

Given any city or location, !(Not)Doomsday simultaneously monitors six catastrophic threat domains — **volcanoes, earthquakes, floods, forest fires, pandemics, and solar flares** — aggregates real-time data from USGS, NASA, WHO, NOAA, and other authoritative sources, computes composite risk scores, and visualizes everything on an interactive 3D globe. An LLM-driven cascade engine then predicts how these threats might compound into worst-case scenarios and recommends coordinated response actions.

---

## Team 20

| Name | Email |
|------|-------|
| Atharva Keskar | keskar.at@northeastern.edu |
| Soham Santra | santra.s@northeastern.edu |
| Vedant Ranade | ranade.v@northeastern.edu |
| Vashistha Pandya | pandya.vas@northeastern.edu |
| Viraj Paradkar | paradkar.v@northeastern.edu |

---

## The Problem

Traditional disaster monitoring systems operate in isolation — seismologists track earthquakes, volcanologists watch eruptions, meteorologists forecast floods — but no single platform brings all of these signals together. In reality, catastrophic events cascade: an earthquake can trigger tsunamis and volcanic unrest, a wildfire season strains emergency response capacity during a pandemic, and a geomagnetic storm can disable the communications infrastructure needed for all of the above. The data exists across dozens of public APIs, but the cross-domain risk picture is invisible.

## Our Solution

!(Not)Doomsday is a unified platform that:

1. **Collects** real-time data from 8+ authoritative APIs (USGS HANS, USGS Earthquake, NASA FIRMS, NOAA Space Weather, WHO GHO, GDELT, Google Trends, disease.sh)
2. **Enriches** raw signals with composite risk scoring, seismicity analysis, fire radiative power clustering, flood discharge forecasting, and pandemic trend detection
3. **Visualizes** all threats simultaneously on an interactive 3D globe with per-city risk dashboards
4. **Predicts** cascading failure scenarios using a Groq-powered LLM (Llama 3.3 70B) backed by a 176K-document ChromaDB knowledge base of historical disaster data
5. **Validates** predictions against historical precedent via a dedicated validation module

---

## Architecture

```
┌──────────────────────────────────────────────────────────────┐
│                    FRONTEND (Vite + Three.js)                │
│                                                              │
│  index.html ──── Landing page (shader earth, scroll anim)   │
│  dashboard.html ─ APO-DEX city risk viewer (Pokédex style)  │
│  globe.html ──── Globe.gl interactive 3D visualization      │
│                                                              │
│  Shared state: localStorage "notdoomsday-filters"            │
│  Shared assets: GLSL shaders, earth textures                 │
└──────────────┬───────────────────────────────────────────────┘
               │ reads JSON data files
               ▼
┌──────────────────────────────────────────────────────────────┐
│            DATA LAYER                                        │
│                                                              │
│  volcano_data/volcanoes_enriched.json  (170 US volcanoes)    │
│  Data/map_fire.json                   (NASA FIRMS hotspots)  │
│  Data/earthquake_coordinates.json     (USGS seismic events)  │
│  Data/flood_coordinates.json          (NOAA flood zones)     │
│  Data/Context_Json.json               (unified threat data)  │
│  Data/apocalypse_analysis.json        (LLM cascade output)   │
└──────────────┬───────────────────────────────────────────────┘
               │ generated by
               ▼
┌──────────────────────────────────────────────────────────────┐
│            THREAT MODULES (Python)                           │
│                                                              │
│  Volcano/    → USGS HANS + Earthquake API enrichment         │
│  Earthquake/ → USGS FDSNWS seismic event analysis            │
│  Flood/      → NOAA river discharge + forecast modeling      │
│  Forest_fire/→ NASA FIRMS thermal hotspot detection          │
│  pandemic/   → WHO + Google Trends + GDELT + disease.sh      │
│  solarFlare/ → NOAA SWPC space weather monitoring            │
└──────────────┬───────────────────────────────────────────────┘
               │ feeds into
               ▼
┌──────────────────────────────────────────────────────────────┐
│            CASCADE ENGINE                                    │
│                                                              │
│  cascade_engine/                                             │
│    retriever.py      → ChromaDB semantic search (176K docs)  │
│    cascade_prompt.py → System prompt for cascade analysis    │
│    cascade_chain.py  → Retriever → Prompt → Groq pipeline   │
│    cascade_server.py → Flask API endpoints                   │
│                                                              │
│  main.py → Master pipeline: city → coords → all modules     │
│            → LLM analysis → validation → final output        │
│  Backend.py → FastAPI wrapper for the pipeline               │
└──────────────────────────────────────────────────────────────┘
```

---

## File Structure

```
Not_doomsday/
├── index.html                 # Landing page (Three.js shader earth, scroll experience)
├── dashboard.html             # APO-DEX dashboard (city risk viewer, Pokédex-inspired)
├── globe.html                 # Interactive 3D globe (Globe.gl, multi-layer data)
│
├── src/
│   ├── landing.js             # Three.js earth + scroll-driven animations + parallax
│   ├── style.css              # Landing page styles
│   ├── dashboard.js           # APO-DEX rendering, mini globe, city data, filters
│   ├── dashboard.css          # Dashboard styles
│   ├── globe.js               # Globe.gl setup, multi-layer data loading, filter sync
│   ├── globe.css              # Globe page styles
│   └── shaders/               # Custom GLSL shaders for the Three.js earth
│       ├── earth/
│       │   ├── vertex.glsl
│       │   └── fragment.glsl  # Day/night blend, clouds, fresnel, atmosphere, specular
│       └── atmosphere/
│           ├── vertex.glsl
│           └── fragment.glsl  # Backside atmosphere glow
│
├── public/earth/              # Earth textures (day, night, specular+clouds)
├── Data/                      # Runtime data files (pipeline output)
├── volcano_data/              # Volcano pipeline output (enriched JSON + CSV)
│
├── main.py                    # Master pipeline orchestrator
├── Backend.py                 # FastAPI server for the pipeline
├── run_all_modules.py         # Runs all 6 threat modules for a location
│
├── Volcano/                   # Volcano threat module (USGS HANS + Earthquake API)
├── Earthquake/                # Earthquake threat module (USGS FDSNWS)
├── Flood/                     # Flood threat module (NOAA discharge data)
├── Forest_fire/               # Forest fire threat module (NASA FIRMS)
├── pandemic/                  # Pandemic threat module (WHO, Trends, GDELT, disease.sh)
├── solarFlare/                # Solar flare threat module (NOAA SWPC)
├── cascade_engine/            # LLM cascade prediction engine (Groq + ChromaDB)
│
├── package.json               # npm: three, gsap, vite, vite-plugin-glsl
├── vite.config.js             # Vite multi-page config with GLSL plugin
└── knowledgebasecursor.md     # Internal development knowledgebase
```

---

## Tech Stack

| Layer | Technology |
|-------|-----------|
| Frontend build | Vite v6 with vite-plugin-glsl |
| 3D rendering (landing/dashboard) | Three.js v0.174 with custom GLSL shaders |
| 3D rendering (globe) | Globe.gl v2.45.0 via CDN |
| Scroll animations | GSAP v3 (ScrollTrigger) |
| Data pipelines | Python 3.11 + requests |
| LLM inference | Groq API (Llama 3.3 70B Versatile) |
| Vector database | ChromaDB (176K historical disaster documents) |
| Backend API | FastAPI (pipeline trigger) + Flask (cascade engine) |
| Design system | Dark theme (#07080c), orange accent (#ff6840), glassmorphic panels |
| Fonts | Outfit (UI), JetBrains Mono (technical), Press Start 2P (APO-DEX) |

---

## APIs Used

| API | Source | Auth | Used For |
|-----|--------|------|----------|
| USGS HANS | volcanoes.usgs.gov | None | 170 US volcanoes, monitoring status, alert levels |
| USGS Earthquake | earthquake.usgs.gov | None | Seismic events, magnitude, depth, proximity analysis |
| NASA FIRMS | firms.modaps.eosdis.nasa.gov | MAP_KEY | Thermal hotspot detection, fire radiative power |
| NOAA GloFAS | via Flood module | None | River discharge data, flood forecasting |
| WHO GHO | Global Health Observatory | None | Disease indicators (cholera, TB, measles, etc.) |
| Google Trends | via pytrends | None | Symptom/disease search trend analysis |
| GDELT | gdeltproject.org | None | Global news articles on outbreaks, geo-tagged events |
| disease.sh | disease.sh API | None | Real-time COVID, flu, vaccine coverage data |
| NOAA SWPC | Space Weather Prediction Center | None | Solar flare activity, Kp index, geomagnetic storms |
| Groq | console.groq.com | API Key | LLM inference for cascade prediction + analysis |

---

## Quick Start

### Frontend (visualization)

```bash
# Install JS dependencies
npm install

# Start Vite dev server
npm run dev

# Opens at http://localhost:5173
#   /               → Landing page
#   /dashboard.html → APO-DEX dashboard
#   /globe.html     → Interactive 3D globe
```

### Data Pipeline (threat analysis for a city)

```bash
# Install Python dependencies
pip install requests groq python-dotenv chromadb langchain

# Set up your Groq API key
# Create .env file with: GROQ_API_KEY_5=gsk_your_key_here

# Run full pipeline for a city
python main.py "Boston"

# Or run individual modules:
python Volcano/volcano_pipeline.py                    # Volcano data enrichment
python Volcano/volcano_pipeline.py --location "Hawaii" # Location risk lookup
```

### Cascade Engine (standalone)

```bash
cd cascade_engine
python retriever.py       # Test ChromaDB connection (176K docs)
python cascade_chain.py   # Test full cascade prediction
python cascade_server.py  # Start Flask API on port 5001
```

---

## How It Works

1. **User enters a city** (e.g., "Boston") via the pipeline or FastAPI endpoint
2. **Coordinates are resolved** using geocoding
3. **All 6 threat modules run in parallel**, each querying their respective APIs:
   - Volcano: USGS HANS alert levels + nearby earthquake seismicity
   - Earthquake: USGS FDSNWS events within radius, magnitude distribution, clustering analysis
   - Flood: NOAA river discharge data, forecast vs. historical peak comparison
   - Forest Fire: NASA FIRMS satellite thermal detections, fire radiative power clustering
   - Pandemic: WHO disease indicators + Google Trends symptom surges + GDELT news monitoring + disease.sh real-time data
   - Solar Flare: NOAA SWPC flare classifications, Kp geomagnetic index
4. **Each module writes its results** to a shared `Context_Json.json`
5. **The Groq LLM** receives all threat data simultaneously, ranks calamities by severity, and generates an apocalypse scenario timeline predicting how disasters might cascade
6. **The cascade engine** enriches the analysis with semantic search against 176K historical disaster records via ChromaDB
7. **The frontend** loads the output JSON files and renders them on the interactive globe and APO-DEX dashboard

---

## Data Visualization Layers

The interactive globe supports four data layers, each togglable via filter checkboxes (synced between dashboard and globe via localStorage):

| Layer | Color | Data Source | Points |
|-------|-------|-------------|--------|
| Volcanoes | Red (#ff4d2e) | USGS HANS enriched pipeline | 170 US volcanoes with composite risk scores |
| Forest Fires | Orange (#f97316) | NASA FIRMS hotspot detections | Real-time thermal anomalies with FRP-based risk |
| Earthquakes | Purple (#8b5cf6) | USGS Earthquake API | Seismic events with location + risk level |
| Floods | Blue (#3b82f6) | NOAA discharge forecasting | Flood zones with risk level classification |

---

## Risk Scoring

### Volcano Composite Risk Score (0-100)

| Component | Weight | Source |
|-----------|--------|--------|
| NVEWS Threat Level | 25% | Long-term hazard assessment |
| Alert Level | 25% | Current USGS alert status |
| Aviation Color Code | 15% | Current eruption state |
| Earthquake Count (30d) | 15% | Precursor seismicity |
| Max Earthquake Magnitude | 10% | Seismic intensity |
| Shallow Earthquakes (<5km) | 10% | Magma movement indicator |

### Other Calamities

Fire, earthquake, and flood data points are classified as **Low**, **Medium**, or **High** risk by their respective modules using API-specific thresholds (FRP intensity for fires, magnitude/clustering for earthquakes, discharge vs. historical peak ratios for floods).

---

## Design System

- **Background:** `#07080c`
- **Cards:** `rgba(12, 14, 20, 0.85)` with `backdrop-filter: blur(20px)`
- **Accent:** `#ff6840` (orange)
- **Risk colors:** Critical `#f43f5e` / High `#f97316` / Moderate `#eab308` / Low `#22c55e`
- **Calamity colors:** Volcano `#ff4d2e` / Earthquake `#8b5cf6` / Flood `#3b82f6` / Fire `#f97316` / Pandemic `#10b981` / Solar `#fbbf24`

---

## Known Issues

1. **Windows UTF-8:** Hawaiian characters (Kilauea) require `encoding="utf-8"` on all file writes
2. **Globe.gl version:** Must use `2.45.0` — other versions may fail with `Globe is not defined`
3. **Globe.gl + Three.js:** Globe.gl bundles its own Three.js — do NOT import Three.js on the globe page
4. **VPN:** Some USGS/Groq endpoints get blocked by VPN — disable if you see 403 errors
5. **USGS Earthquake limit:** Max 500 results per query for very active regions
6. **Vite public dir:** Earth textures in `public/earth/` are served at `/earth/*` by Vite. Pipeline data files in `Data/` and `volcano_data/` are served from the project root in dev mode only

---

## License

Built for the InnovAIte Hackathon 2026 at Northeastern University.
