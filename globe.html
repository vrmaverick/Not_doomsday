<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Globe — !(Not)Doomsday</title>
<script src="https://unpkg.com/globe.gl@2.45.0/dist/globe.gl.min.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;600;700&family=Outfit:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/src/globe.css">
</head>
<body>

<!-- Loading screen -->
<div class="loading-overlay" id="loading">
  <div class="loading-text">Initializing globe...</div>
</div>

<!-- ============================================================
     NAVIGATION (shared, with globe-specific status pills)
     ============================================================ -->
<nav class="navbar">
  <div class="nav-left">
    <a href="index.html" class="nav-logo">
      <div class="logo-icon">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/>
          <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
        </svg>
      </div>
      <div class="logo-text">!(<span>Not</span>)Doomsday</div>
    </a>
    <ul class="nav-links">
      <li><a href="globe.html" class="active">Globe</a></li>
      <li><a href="dashboard.html">Dashboard</a></li>
    </ul>
  </div>
  <div class="nav-right">
    <div class="status-bar">
      <div class="status-pill">
        <div class="status-dot"></div>
        USGS HANS LIVE
      </div>
      <div class="status-pill">
        <div class="status-dot warning" id="elevated-dot"></div>
        <span id="elevated-count">—</span> ELEVATED
      </div>
      <div class="status-pill" id="time-pill">
        <span id="utc-time">--:--:--</span> UTC
      </div>
    </div>
    <button class="nav-info" title="About the project">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/>
      </svg>
    </button>
  </div>
</nav>

<!-- ============================================================
     SIDE PANEL
     ============================================================ -->
<div class="side-panel">

  <!-- Calamity Filters -->
  <div class="panel-card">
    <div class="panel-title">Data Layers</div>
    <div class="globe-filter-list">
      <label class="globe-filter-item"><input type="checkbox" checked data-calamity="volcano"><span class="globe-filter-dot volcano"></span><span>Volcanoes</span></label>
      <label class="globe-filter-item"><input type="checkbox" checked data-calamity="earthquake"><span class="globe-filter-dot earthquake"></span><span>Earthquakes</span></label>
      <label class="globe-filter-item"><input type="checkbox" checked data-calamity="flood"><span class="globe-filter-dot flood"></span><span>Floods</span></label>
      <label class="globe-filter-item"><input type="checkbox" checked data-calamity="fire"><span class="globe-filter-dot fire"></span><span>Forest Fires</span></label>
      <label class="globe-filter-item"><input type="checkbox" checked data-calamity="pandemic"><span class="globe-filter-dot pandemic"></span><span>Pandemics</span></label>
      <label class="globe-filter-item"><input type="checkbox" checked data-calamity="solar"><span class="globe-filter-dot solar"></span><span>Solar Flares</span></label>
    </div>
  </div>

  <!-- Active Alerts -->
  <div class="panel-card" id="alert-panel">
    <div class="panel-title">Active Alerts</div>
    <div class="alert-list" id="alert-list"></div>
  </div>

  <!-- Legend -->
  <div class="panel-card">
    <div class="panel-title">Legend</div>
    <div class="legend">
      <div class="legend-item"><div class="legend-swatch" style="background:#f43f5e"></div> Critical (70+)</div>
      <div class="legend-item"><div class="legend-swatch" style="background:#f97316"></div> High (40-70)</div>
      <div class="legend-item"><div class="legend-swatch" style="background:#eab308"></div> Moderate (15-40)</div>
      <div class="legend-item"><div class="legend-swatch" style="background:#22c55e"></div> Low (&lt;15)</div>
      <div class="legend-item"><div class="legend-swatch" style="background:rgba(255,255,255,0.15)"></div> Unmonitored</div>
      <div class="legend-item"><div class="legend-swatch" style="background:#ff6840;box-shadow:0 0 8px rgba(255,104,64,0.5)"></div> Pulsing = Elevated</div>
    </div>
  </div>
</div>

<!-- ============================================================
     DETAIL PANEL (slides in on volcano click)
     ============================================================ -->
<div class="detail-panel" id="detail-panel">
  <button class="detail-close" id="detail-close">×</button>
  <div class="detail-volcano-name" id="d-name">—</div>
  <div class="detail-region" id="d-region">—</div>
  <div class="detail-grid">
    <div class="detail-stat">
      <div class="detail-stat-label">Risk Score</div>
      <div class="detail-stat-value" id="d-risk">—</div>
      <div class="detail-bar"><div class="detail-bar-fill" id="d-risk-bar" style="width:0%;background:#ff6840"></div></div>
    </div>
    <div class="detail-stat">
      <div class="detail-stat-label">Alert Level</div>
      <div class="detail-stat-value" id="d-alert">—</div>
    </div>
    <div class="detail-stat">
      <div class="detail-stat-label">Color Code</div>
      <div class="detail-stat-value" id="d-color">—</div>
    </div>
    <div class="detail-stat">
      <div class="detail-stat-label">Threat Rating</div>
      <div class="detail-stat-value" id="d-threat">—</div>
    </div>
    <div class="detail-stat">
      <div class="detail-stat-label">Earthquakes (30d)</div>
      <div class="detail-stat-value" id="d-eq">—</div>
    </div>
    <div class="detail-stat">
      <div class="detail-stat-label">Max Magnitude</div>
      <div class="detail-stat-value" id="d-mag">—</div>
    </div>
    <div class="detail-stat">
      <div class="detail-stat-label">Shallow Quakes</div>
      <div class="detail-stat-value" id="d-shallow">—</div>
    </div>
    <div class="detail-stat">
      <div class="detail-stat-label">Elevation</div>
      <div class="detail-stat-value" id="d-elev">—</div>
    </div>
  </div>
  <a class="detail-link" id="d-link" href="#" target="_blank">View on USGS →</a>
</div>

<!-- Bottom stats -->
<div class="bottom-bar">
  <div class="bottom-stat">
    <div class="bottom-stat-value" id="stat-total">—</div>
    <div class="bottom-stat-label">Total Data Points</div>
  </div>
  <div class="bottom-stat">
    <div class="bottom-stat-value" id="stat-layers">—</div>
    <div class="bottom-stat-label">Active Layers</div>
  </div>
  <div class="bottom-stat">
    <div class="bottom-stat-value" id="stat-elevated">—</div>
    <div class="bottom-stat-label">Elevated / High Risk</div>
  </div>
  <div class="bottom-stat">
    <div class="bottom-stat-value" id="stat-fires">—</div>
    <div class="bottom-stat-label">Fire Hotspots</div>
  </div>
</div>

<!-- Globe container -->
<div id="globe-container"></div>

<!-- Globe JS (not a module — Globe.gl is on window from CDN) -->
<script src="/src/globe.js" type="module"></script>
</body>
</html>
